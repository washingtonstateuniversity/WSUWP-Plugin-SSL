var wsuTLS=wsuTLS||{};!function(a,b,c,d,e){"use strict";e.appView=b.View.extend({el:".wsu-manage-tls",domain:"",row:"",events:{"click #submit-add-domain":"handle_submit_click","click .confirm_tls":"handle_confirm_click","click .check_tls":"handle_tls_check","click .view_csr":"view_csr","click .view-csr-close":"remove_csr_response","click .tls-status-close":"remove_tls_response"},handle_submit_click:function(){this.domain=c("#add-domain").val(),this.unconfirm_tls_domain(this.domain)},handle_confirm_click:function(b){this.domain=c(b.target).attr("data-domain"),this.row=c(b.target).attr("id"),!0===a.confirm("Removing "+this.domain+" from the TLS confirmation list.")&&this.confirm_tls_domain(this.domain)},handle_tls_check:function(b){this.domain=c(b.target).attr("data-domain");var d=c("#tls_ajax_nonce").val(),e={action:"check_tls",domain:this.domain,ajax_nonce:d};c.post(a.ajaxurl,e,this.check_tls_response)},check_tls_response:function(a){a=c.parseJSON(a),a.success&&(c(".tls-status-container-body").html(a.success),c(".tls-status-container-wrapper").show())},view_csr:function(b){this.domain=c(b.target).attr("data-domain");var d=c("#tls_ajax_nonce").val(),e={action:"view_csr",domain:this.domain,ajax_nonce:d};c.post(a.ajaxurl,e,this.view_csr_response)},view_csr_response:function(a){a=c.parseJSON(a),a.success&&(c(".view-csr-container-body").html("<textarea>"+a.success+"</textarea>"),c(".view-csr-container-wrapper").show())},remove_csr_response:function(){c(".view-csr-container-body").html(""),c(".view-csr-container-wrapper").hide()},remove_tls_response:function(){c(".tls-status-container-body").html(""),c(".tls-status-container-wrapper").hide()},unconfirm_tls_domain:function(b){var d=c("#tls_ajax_nonce").val(),e={action:"unconfirm_tls",domain:b,ajax_nonce:d};c.post(a.ajaxurl,e,this.handle_unconfirm_response)},handle_unconfirm_response:function(b){b=c.parseJSON(b),b.success&&(c("#add-domain").val(""),a.location.reload())},confirm_tls_domain:function(b){var d=c("#tls_ajax_nonce").val(),e={action:"confirm_tls",domain:b,ajax_nonce:d};c.post(a.ajaxurl,e,this.handle_confirm_response)},handle_confirm_response:function(a){a=c.parseJSON(a),a.success&&c("#"+this.row).parentsUntil("tbody").remove()}}),e.app=new e.appView}(window,Backbone,jQuery,_,wsuTLS);